{"ast":null,"code":"/*! @azure/msal-browser v4.26.2 2025-11-19 */\n'use strict';\n\nimport _objectSpread from \"/Users/tolu/pangram-cos-350/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { PerformanceEvents, PromptValue, invokeAsync, ProtocolMode, AuthError, invoke, HttpMethod } from '@azure/msal-common/browser';\nimport { StandardInteractionClient } from './StandardInteractionClient.mjs';\nimport { createBrowserAuthError } from '../error/BrowserAuthError.mjs';\nimport { InteractionType, BrowserConstants } from '../utils/BrowserConstants.mjs';\nimport { initiateEarRequest, monitorIframeForHash, initiateCodeFlowWithPost, initiateCodeRequest } from '../interaction_handler/SilentHandler.mjs';\nimport { preconnect } from '../utils/BrowserUtils.mjs';\nimport { deserializeResponse } from '../response/ResponseHandler.mjs';\nimport { handleResponseCode, handleResponseEAR, getAuthCodeRequestUrl } from '../protocol/Authorize.mjs';\nimport { generatePkceCodes } from '../crypto/PkceGenerator.mjs';\nimport { isPlatformAuthAllowed } from '../broker/nativeBroker/PlatformAuthProvider.mjs';\nimport { generateEarKey } from '../crypto/BrowserCrypto.mjs';\nimport { silentLogoutUnsupported } from '../error/BrowserAuthErrorCodes.mjs';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\nclass SilentIframeClient extends StandardInteractionClient {\n  constructor(config, storageImpl, browserCrypto, logger, eventHandler, navigationClient, apiId, performanceClient, nativeStorageImpl, platformAuthProvider, correlationId) {\n    super(config, storageImpl, browserCrypto, logger, eventHandler, navigationClient, performanceClient, platformAuthProvider, correlationId);\n    this.apiId = apiId;\n    this.nativeStorage = nativeStorageImpl;\n  }\n  /**\r\n   * Acquires a token silently by opening a hidden iframe to the /authorize endpoint with prompt=none or prompt=no_session\r\n   * @param request\r\n   */\n  async acquireToken(request) {\n    this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentIframeClientAcquireToken, request.correlationId);\n    // Check that we have some SSO data\n    if (!request.loginHint && !request.sid && (!request.account || !request.account.username)) {\n      this.logger.warning(\"No user hint provided. The authorization server may need more information to complete this request.\");\n    }\n    // Check the prompt value\n    const inputRequest = _objectSpread({}, request);\n    if (inputRequest.prompt) {\n      if (inputRequest.prompt !== PromptValue.NONE && inputRequest.prompt !== PromptValue.NO_SESSION) {\n        this.logger.warning(\"SilentIframeClient. Replacing invalid prompt \".concat(inputRequest.prompt, \" with \").concat(PromptValue.NONE));\n        inputRequest.prompt = PromptValue.NONE;\n      }\n    } else {\n      inputRequest.prompt = PromptValue.NONE;\n    }\n    // Create silent request\n    const silentRequest = await invokeAsync(this.initializeAuthorizationRequest.bind(this), PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest, this.logger, this.performanceClient, request.correlationId)(inputRequest, InteractionType.Silent);\n    silentRequest.platformBroker = isPlatformAuthAllowed(this.config, this.logger, this.platformAuthProvider, silentRequest.authenticationScheme);\n    preconnect(silentRequest.authority);\n    if (this.config.auth.protocolMode === ProtocolMode.EAR) {\n      return this.executeEarFlow(silentRequest);\n    } else {\n      return this.executeCodeFlow(silentRequest);\n    }\n  }\n  /**\r\n   * Executes auth code + PKCE flow\r\n   * @param request\r\n   * @returns\r\n   */\n  async executeCodeFlow(request) {\n    let authClient;\n    const serverTelemetryManager = this.initializeServerTelemetryManager(this.apiId);\n    try {\n      // Initialize the client\n      authClient = await invokeAsync(this.createAuthCodeClient.bind(this), PerformanceEvents.StandardInteractionClientCreateAuthCodeClient, this.logger, this.performanceClient, request.correlationId)({\n        serverTelemetryManager,\n        requestAuthority: request.authority,\n        requestAzureCloudOptions: request.azureCloudOptions,\n        requestExtraQueryParameters: request.extraQueryParameters,\n        account: request.account\n      });\n      return await invokeAsync(this.silentTokenHelper.bind(this), PerformanceEvents.SilentIframeClientTokenHelper, this.logger, this.performanceClient, request.correlationId)(authClient, request);\n    } catch (e) {\n      if (e instanceof AuthError) {\n        e.setCorrelationId(this.correlationId);\n        serverTelemetryManager.cacheFailedRequest(e);\n      }\n      if (!authClient || !(e instanceof AuthError) || e.errorCode !== BrowserConstants.INVALID_GRANT_ERROR) {\n        throw e;\n      }\n      this.performanceClient.addFields({\n        retryError: e.errorCode\n      }, this.correlationId);\n      return await invokeAsync(this.silentTokenHelper.bind(this), PerformanceEvents.SilentIframeClientTokenHelper, this.logger, this.performanceClient, this.correlationId)(authClient, request);\n    }\n  }\n  /**\r\n   * Executes EAR flow\r\n   * @param request\r\n   */\n  async executeEarFlow(request) {\n    const correlationId = request.correlationId;\n    const discoveredAuthority = await invokeAsync(this.getDiscoveredAuthority.bind(this), PerformanceEvents.StandardInteractionClientGetDiscoveredAuthority, this.logger, this.performanceClient, correlationId)({\n      requestAuthority: request.authority,\n      requestAzureCloudOptions: request.azureCloudOptions,\n      requestExtraQueryParameters: request.extraQueryParameters,\n      account: request.account\n    });\n    const earJwk = await invokeAsync(generateEarKey, PerformanceEvents.GenerateEarKey, this.logger, this.performanceClient, correlationId)();\n    const pkceCodes = await invokeAsync(generatePkceCodes, PerformanceEvents.GeneratePkceCodes, this.logger, this.performanceClient, correlationId)(this.performanceClient, this.logger, correlationId);\n    const silentRequest = _objectSpread(_objectSpread({}, request), {}, {\n      earJwk: earJwk,\n      codeChallenge: pkceCodes.challenge\n    });\n    const msalFrame = await invokeAsync(initiateEarRequest, PerformanceEvents.SilentHandlerInitiateAuthRequest, this.logger, this.performanceClient, correlationId)(this.config, discoveredAuthority, silentRequest, this.logger, this.performanceClient);\n    const responseType = this.config.auth.OIDCOptions.serverResponseType;\n    // Monitor the window for the hash. Return the string value and close the popup when the hash is received. Default timeout is 60 seconds.\n    const responseString = await invokeAsync(monitorIframeForHash, PerformanceEvents.SilentHandlerMonitorIframeForHash, this.logger, this.performanceClient, correlationId)(msalFrame, this.config.system.iframeHashTimeout, this.config.system.pollIntervalMilliseconds, this.performanceClient, this.logger, correlationId, responseType);\n    const serverParams = invoke(deserializeResponse, PerformanceEvents.DeserializeResponse, this.logger, this.performanceClient, correlationId)(responseString, responseType, this.logger);\n    if (!serverParams.ear_jwe && serverParams.code) {\n      // If server doesn't support EAR, they may fallback to auth code flow instead\n      const authClient = await invokeAsync(this.createAuthCodeClient.bind(this), PerformanceEvents.StandardInteractionClientCreateAuthCodeClient, this.logger, this.performanceClient, correlationId)({\n        serverTelemetryManager: this.initializeServerTelemetryManager(this.apiId),\n        requestAuthority: request.authority,\n        requestAzureCloudOptions: request.azureCloudOptions,\n        requestExtraQueryParameters: request.extraQueryParameters,\n        account: request.account,\n        authority: discoveredAuthority\n      });\n      return invokeAsync(handleResponseCode, PerformanceEvents.HandleResponseCode, this.logger, this.performanceClient, correlationId)(silentRequest, serverParams, pkceCodes.verifier, this.apiId, this.config, authClient, this.browserStorage, this.nativeStorage, this.eventHandler, this.logger, this.performanceClient, this.platformAuthProvider);\n    } else {\n      return invokeAsync(handleResponseEAR, PerformanceEvents.HandleResponseEar, this.logger, this.performanceClient, correlationId)(silentRequest, serverParams, this.apiId, this.config, discoveredAuthority, this.browserStorage, this.nativeStorage, this.eventHandler, this.logger, this.performanceClient, this.platformAuthProvider);\n    }\n  }\n  /**\r\n   * Currently Unsupported\r\n   */\n  logout() {\n    // Synchronous so we must reject\n    return Promise.reject(createBrowserAuthError(silentLogoutUnsupported));\n  }\n  /**\r\n   * Helper which acquires an authorization code silently using a hidden iframe from given url\r\n   * using the scopes requested as part of the id, and exchanges the code for a set of OAuth tokens.\r\n   * @param navigateUrl\r\n   * @param userRequestScopes\r\n   */\n  async silentTokenHelper(authClient, request) {\n    const correlationId = request.correlationId;\n    this.performanceClient.addQueueMeasurement(PerformanceEvents.SilentIframeClientTokenHelper, correlationId);\n    const pkceCodes = await invokeAsync(generatePkceCodes, PerformanceEvents.GeneratePkceCodes, this.logger, this.performanceClient, correlationId)(this.performanceClient, this.logger, correlationId);\n    const silentRequest = _objectSpread(_objectSpread({}, request), {}, {\n      codeChallenge: pkceCodes.challenge\n    });\n    let msalFrame;\n    if (request.httpMethod === HttpMethod.POST) {\n      msalFrame = await invokeAsync(initiateCodeFlowWithPost, PerformanceEvents.SilentHandlerInitiateAuthRequest, this.logger, this.performanceClient, correlationId)(this.config, authClient.authority, silentRequest, this.logger, this.performanceClient);\n    } else {\n      // Create authorize request url\n      const navigateUrl = await invokeAsync(getAuthCodeRequestUrl, PerformanceEvents.GetAuthCodeUrl, this.logger, this.performanceClient, correlationId)(this.config, authClient.authority, silentRequest, this.logger, this.performanceClient);\n      // Get the frame handle for the silent request\n      msalFrame = await invokeAsync(initiateCodeRequest, PerformanceEvents.SilentHandlerInitiateAuthRequest, this.logger, this.performanceClient, correlationId)(navigateUrl, this.performanceClient, this.logger, correlationId, this.config.system.navigateFrameWait);\n    }\n    const responseType = this.config.auth.OIDCOptions.serverResponseType;\n    // Monitor the window for the hash. Return the string value and close the popup when the hash is received. Default timeout is 60 seconds.\n    const responseString = await invokeAsync(monitorIframeForHash, PerformanceEvents.SilentHandlerMonitorIframeForHash, this.logger, this.performanceClient, correlationId)(msalFrame, this.config.system.iframeHashTimeout, this.config.system.pollIntervalMilliseconds, this.performanceClient, this.logger, correlationId, responseType);\n    const serverParams = invoke(deserializeResponse, PerformanceEvents.DeserializeResponse, this.logger, this.performanceClient, correlationId)(responseString, responseType, this.logger);\n    return invokeAsync(handleResponseCode, PerformanceEvents.HandleResponseCode, this.logger, this.performanceClient, correlationId)(request, serverParams, pkceCodes.verifier, this.apiId, this.config, authClient, this.browserStorage, this.nativeStorage, this.eventHandler, this.logger, this.performanceClient, this.platformAuthProvider);\n  }\n}\nexport { SilentIframeClient };","map":{"version":3,"names":["SilentIframeClient","StandardInteractionClient","constructor","config","storageImpl","browserCrypto","logger","eventHandler","navigationClient","apiId","performanceClient","nativeStorageImpl","platformAuthProvider","correlationId","nativeStorage","acquireToken","request","addQueueMeasurement","PerformanceEvents","SilentIframeClientAcquireToken","loginHint","sid","account","username","warning","inputRequest","_objectSpread","prompt","PromptValue","NONE","NO_SESSION","concat","silentRequest","invokeAsync","initializeAuthorizationRequest","bind","StandardInteractionClientInitializeAuthorizationRequest","InteractionType","Silent","platformBroker","isPlatformAuthAllowed","authenticationScheme","preconnect","authority","auth","protocolMode","ProtocolMode","EAR","executeEarFlow","executeCodeFlow","authClient","serverTelemetryManager","initializeServerTelemetryManager","createAuthCodeClient","StandardInteractionClientCreateAuthCodeClient","requestAuthority","requestAzureCloudOptions","azureCloudOptions","requestExtraQueryParameters","extraQueryParameters","silentTokenHelper","SilentIframeClientTokenHelper","e","AuthError","setCorrelationId","cacheFailedRequest","errorCode","BrowserConstants","INVALID_GRANT_ERROR","addFields","retryError","discoveredAuthority","getDiscoveredAuthority","StandardInteractionClientGetDiscoveredAuthority","earJwk","generateEarKey","GenerateEarKey","pkceCodes","generatePkceCodes","GeneratePkceCodes","codeChallenge","challenge","msalFrame","initiateEarRequest","SilentHandlerInitiateAuthRequest","responseType","OIDCOptions","serverResponseType","responseString","monitorIframeForHash","SilentHandlerMonitorIframeForHash","system","iframeHashTimeout","pollIntervalMilliseconds","serverParams","invoke","deserializeResponse","DeserializeResponse","ear_jwe","code","handleResponseCode","HandleResponseCode","verifier","browserStorage","handleResponseEAR","HandleResponseEar","logout","Promise","reject","createBrowserAuthError","silentLogoutUnsupported","httpMethod","HttpMethod","POST","initiateCodeFlowWithPost","navigateUrl","getAuthCodeRequestUrl","GetAuthCodeUrl","initiateCodeRequest","navigateFrameWait"],"sources":["/Users/tolu/pangram-cos-350/frontend/node_modules/@azure/msal-browser/src/interaction_client/SilentIframeClient.ts"],"sourcesContent":["/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    ICrypto,\n    Logger,\n    PromptValue,\n    AuthorizationCodeClient,\n    AuthError,\n    IPerformanceClient,\n    PerformanceEvents,\n    invokeAsync,\n    invoke,\n    ProtocolMode,\n    CommonAuthorizationUrlRequest,\n    HttpMethod,\n} from \"@azure/msal-common/browser\";\nimport { StandardInteractionClient } from \"./StandardInteractionClient.js\";\nimport { BrowserConfiguration } from \"../config/Configuration.js\";\nimport { BrowserCacheManager } from \"../cache/BrowserCacheManager.js\";\nimport { EventHandler } from \"../event/EventHandler.js\";\nimport { INavigationClient } from \"../navigation/INavigationClient.js\";\nimport {\n    createBrowserAuthError,\n    BrowserAuthErrorCodes,\n} from \"../error/BrowserAuthError.js\";\nimport {\n    InteractionType,\n    ApiId,\n    BrowserConstants,\n} from \"../utils/BrowserConstants.js\";\nimport {\n    initiateCodeRequest,\n    initiateCodeFlowWithPost,\n    initiateEarRequest,\n    monitorIframeForHash,\n} from \"../interaction_handler/SilentHandler.js\";\nimport { SsoSilentRequest } from \"../request/SsoSilentRequest.js\";\nimport { AuthenticationResult } from \"../response/AuthenticationResult.js\";\nimport * as BrowserUtils from \"../utils/BrowserUtils.js\";\nimport * as ResponseHandler from \"../response/ResponseHandler.js\";\nimport * as Authorize from \"../protocol/Authorize.js\";\nimport { generatePkceCodes } from \"../crypto/PkceGenerator.js\";\nimport { isPlatformAuthAllowed } from \"../broker/nativeBroker/PlatformAuthProvider.js\";\nimport { generateEarKey } from \"../crypto/BrowserCrypto.js\";\nimport { IPlatformAuthHandler } from \"../broker/nativeBroker/IPlatformAuthHandler.js\";\n\nexport class SilentIframeClient extends StandardInteractionClient {\n    protected apiId: ApiId;\n    protected nativeStorage: BrowserCacheManager;\n\n    constructor(\n        config: BrowserConfiguration,\n        storageImpl: BrowserCacheManager,\n        browserCrypto: ICrypto,\n        logger: Logger,\n        eventHandler: EventHandler,\n        navigationClient: INavigationClient,\n        apiId: ApiId,\n        performanceClient: IPerformanceClient,\n        nativeStorageImpl: BrowserCacheManager,\n        platformAuthProvider?: IPlatformAuthHandler,\n        correlationId?: string\n    ) {\n        super(\n            config,\n            storageImpl,\n            browserCrypto,\n            logger,\n            eventHandler,\n            navigationClient,\n            performanceClient,\n            platformAuthProvider,\n            correlationId\n        );\n        this.apiId = apiId;\n        this.nativeStorage = nativeStorageImpl;\n    }\n\n    /**\n     * Acquires a token silently by opening a hidden iframe to the /authorize endpoint with prompt=none or prompt=no_session\n     * @param request\n     */\n    async acquireToken(\n        request: SsoSilentRequest\n    ): Promise<AuthenticationResult> {\n        this.performanceClient.addQueueMeasurement(\n            PerformanceEvents.SilentIframeClientAcquireToken,\n            request.correlationId\n        );\n        // Check that we have some SSO data\n        if (\n            !request.loginHint &&\n            !request.sid &&\n            (!request.account || !request.account.username)\n        ) {\n            this.logger.warning(\n                \"No user hint provided. The authorization server may need more information to complete this request.\"\n            );\n        }\n\n        // Check the prompt value\n        const inputRequest = { ...request };\n        if (inputRequest.prompt) {\n            if (\n                inputRequest.prompt !== PromptValue.NONE &&\n                inputRequest.prompt !== PromptValue.NO_SESSION\n            ) {\n                this.logger.warning(\n                    `SilentIframeClient. Replacing invalid prompt ${inputRequest.prompt} with ${PromptValue.NONE}`\n                );\n                inputRequest.prompt = PromptValue.NONE;\n            }\n        } else {\n            inputRequest.prompt = PromptValue.NONE;\n        }\n\n        // Create silent request\n        const silentRequest: CommonAuthorizationUrlRequest = await invokeAsync(\n            this.initializeAuthorizationRequest.bind(this),\n            PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,\n            this.logger,\n            this.performanceClient,\n            request.correlationId\n        )(inputRequest, InteractionType.Silent);\n        silentRequest.platformBroker = isPlatformAuthAllowed(\n            this.config,\n            this.logger,\n            this.platformAuthProvider,\n            silentRequest.authenticationScheme\n        );\n        BrowserUtils.preconnect(silentRequest.authority);\n\n        if (this.config.auth.protocolMode === ProtocolMode.EAR) {\n            return this.executeEarFlow(silentRequest);\n        } else {\n            return this.executeCodeFlow(silentRequest);\n        }\n    }\n\n    /**\n     * Executes auth code + PKCE flow\n     * @param request\n     * @returns\n     */\n    async executeCodeFlow(\n        request: CommonAuthorizationUrlRequest\n    ): Promise<AuthenticationResult> {\n        let authClient: AuthorizationCodeClient | undefined;\n        const serverTelemetryManager = this.initializeServerTelemetryManager(\n            this.apiId\n        );\n\n        try {\n            // Initialize the client\n            authClient = await invokeAsync(\n                this.createAuthCodeClient.bind(this),\n                PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,\n                this.logger,\n                this.performanceClient,\n                request.correlationId\n            )({\n                serverTelemetryManager,\n                requestAuthority: request.authority,\n                requestAzureCloudOptions: request.azureCloudOptions,\n                requestExtraQueryParameters: request.extraQueryParameters,\n                account: request.account,\n            });\n\n            return await invokeAsync(\n                this.silentTokenHelper.bind(this),\n                PerformanceEvents.SilentIframeClientTokenHelper,\n                this.logger,\n                this.performanceClient,\n                request.correlationId\n            )(authClient, request);\n        } catch (e) {\n            if (e instanceof AuthError) {\n                (e as AuthError).setCorrelationId(this.correlationId);\n                serverTelemetryManager.cacheFailedRequest(e);\n            }\n\n            if (\n                !authClient ||\n                !(e instanceof AuthError) ||\n                e.errorCode !== BrowserConstants.INVALID_GRANT_ERROR\n            ) {\n                throw e;\n            }\n\n            this.performanceClient.addFields(\n                {\n                    retryError: e.errorCode,\n                },\n                this.correlationId\n            );\n\n            return await invokeAsync(\n                this.silentTokenHelper.bind(this),\n                PerformanceEvents.SilentIframeClientTokenHelper,\n                this.logger,\n                this.performanceClient,\n                this.correlationId\n            )(authClient, request);\n        }\n    }\n\n    /**\n     * Executes EAR flow\n     * @param request\n     */\n    async executeEarFlow(\n        request: CommonAuthorizationUrlRequest\n    ): Promise<AuthenticationResult> {\n        const correlationId = request.correlationId;\n        const discoveredAuthority = await invokeAsync(\n            this.getDiscoveredAuthority.bind(this),\n            PerformanceEvents.StandardInteractionClientGetDiscoveredAuthority,\n            this.logger,\n            this.performanceClient,\n            correlationId\n        )({\n            requestAuthority: request.authority,\n            requestAzureCloudOptions: request.azureCloudOptions,\n            requestExtraQueryParameters: request.extraQueryParameters,\n            account: request.account,\n        });\n\n        const earJwk = await invokeAsync(\n            generateEarKey,\n            PerformanceEvents.GenerateEarKey,\n            this.logger,\n            this.performanceClient,\n            correlationId\n        )();\n        const pkceCodes = await invokeAsync(\n            generatePkceCodes,\n            PerformanceEvents.GeneratePkceCodes,\n            this.logger,\n            this.performanceClient,\n            correlationId\n        )(this.performanceClient, this.logger, correlationId);\n        const silentRequest = {\n            ...request,\n            earJwk: earJwk,\n            codeChallenge: pkceCodes.challenge,\n        };\n        const msalFrame = await invokeAsync(\n            initiateEarRequest,\n            PerformanceEvents.SilentHandlerInitiateAuthRequest,\n            this.logger,\n            this.performanceClient,\n            correlationId\n        )(\n            this.config,\n            discoveredAuthority,\n            silentRequest,\n            this.logger,\n            this.performanceClient\n        );\n\n        const responseType = this.config.auth.OIDCOptions.serverResponseType;\n        // Monitor the window for the hash. Return the string value and close the popup when the hash is received. Default timeout is 60 seconds.\n        const responseString = await invokeAsync(\n            monitorIframeForHash,\n            PerformanceEvents.SilentHandlerMonitorIframeForHash,\n            this.logger,\n            this.performanceClient,\n            correlationId\n        )(\n            msalFrame,\n            this.config.system.iframeHashTimeout,\n            this.config.system.pollIntervalMilliseconds,\n            this.performanceClient,\n            this.logger,\n            correlationId,\n            responseType\n        );\n\n        const serverParams = invoke(\n            ResponseHandler.deserializeResponse,\n            PerformanceEvents.DeserializeResponse,\n            this.logger,\n            this.performanceClient,\n            correlationId\n        )(responseString, responseType, this.logger);\n\n        if (!serverParams.ear_jwe && serverParams.code) {\n            // If server doesn't support EAR, they may fallback to auth code flow instead\n            const authClient = await invokeAsync(\n                this.createAuthCodeClient.bind(this),\n                PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,\n                this.logger,\n                this.performanceClient,\n                correlationId\n            )({\n                serverTelemetryManager: this.initializeServerTelemetryManager(\n                    this.apiId\n                ),\n                requestAuthority: request.authority,\n                requestAzureCloudOptions: request.azureCloudOptions,\n                requestExtraQueryParameters: request.extraQueryParameters,\n                account: request.account,\n                authority: discoveredAuthority,\n            });\n\n            return invokeAsync(\n                Authorize.handleResponseCode,\n                PerformanceEvents.HandleResponseCode,\n                this.logger,\n                this.performanceClient,\n                correlationId\n            )(\n                silentRequest,\n                serverParams,\n                pkceCodes.verifier,\n                this.apiId,\n                this.config,\n                authClient,\n                this.browserStorage,\n                this.nativeStorage,\n                this.eventHandler,\n                this.logger,\n                this.performanceClient,\n                this.platformAuthProvider\n            );\n        } else {\n            return invokeAsync(\n                Authorize.handleResponseEAR,\n                PerformanceEvents.HandleResponseEar,\n                this.logger,\n                this.performanceClient,\n                correlationId\n            )(\n                silentRequest,\n                serverParams,\n                this.apiId,\n                this.config,\n                discoveredAuthority,\n                this.browserStorage,\n                this.nativeStorage,\n                this.eventHandler,\n                this.logger,\n                this.performanceClient,\n                this.platformAuthProvider\n            );\n        }\n    }\n\n    /**\n     * Currently Unsupported\n     */\n    logout(): Promise<void> {\n        // Synchronous so we must reject\n        return Promise.reject(\n            createBrowserAuthError(\n                BrowserAuthErrorCodes.silentLogoutUnsupported\n            )\n        );\n    }\n\n    /**\n     * Helper which acquires an authorization code silently using a hidden iframe from given url\n     * using the scopes requested as part of the id, and exchanges the code for a set of OAuth tokens.\n     * @param navigateUrl\n     * @param userRequestScopes\n     */\n    protected async silentTokenHelper(\n        authClient: AuthorizationCodeClient,\n        request: CommonAuthorizationUrlRequest\n    ): Promise<AuthenticationResult> {\n        const correlationId = request.correlationId;\n        this.performanceClient.addQueueMeasurement(\n            PerformanceEvents.SilentIframeClientTokenHelper,\n            correlationId\n        );\n        const pkceCodes = await invokeAsync(\n            generatePkceCodes,\n            PerformanceEvents.GeneratePkceCodes,\n            this.logger,\n            this.performanceClient,\n            correlationId\n        )(this.performanceClient, this.logger, correlationId);\n\n        const silentRequest = {\n            ...request,\n            codeChallenge: pkceCodes.challenge,\n        };\n\n        let msalFrame: HTMLIFrameElement;\n\n        if (request.httpMethod === HttpMethod.POST) {\n            msalFrame = await invokeAsync(\n                initiateCodeFlowWithPost,\n                PerformanceEvents.SilentHandlerInitiateAuthRequest,\n                this.logger,\n                this.performanceClient,\n                correlationId\n            )(\n                this.config,\n                authClient.authority,\n                silentRequest,\n                this.logger,\n                this.performanceClient\n            );\n        } else {\n            // Create authorize request url\n            const navigateUrl = await invokeAsync(\n                Authorize.getAuthCodeRequestUrl,\n                PerformanceEvents.GetAuthCodeUrl,\n                this.logger,\n                this.performanceClient,\n                correlationId\n            )(\n                this.config,\n                authClient.authority,\n                silentRequest,\n                this.logger,\n                this.performanceClient\n            );\n\n            // Get the frame handle for the silent request\n            msalFrame = await invokeAsync(\n                initiateCodeRequest,\n                PerformanceEvents.SilentHandlerInitiateAuthRequest,\n                this.logger,\n                this.performanceClient,\n                correlationId\n            )(\n                navigateUrl,\n                this.performanceClient,\n                this.logger,\n                correlationId,\n                this.config.system.navigateFrameWait\n            );\n        }\n\n        const responseType = this.config.auth.OIDCOptions.serverResponseType;\n        // Monitor the window for the hash. Return the string value and close the popup when the hash is received. Default timeout is 60 seconds.\n        const responseString = await invokeAsync(\n            monitorIframeForHash,\n            PerformanceEvents.SilentHandlerMonitorIframeForHash,\n            this.logger,\n            this.performanceClient,\n            correlationId\n        )(\n            msalFrame,\n            this.config.system.iframeHashTimeout,\n            this.config.system.pollIntervalMilliseconds,\n            this.performanceClient,\n            this.logger,\n            correlationId,\n            responseType\n        );\n        const serverParams = invoke(\n            ResponseHandler.deserializeResponse,\n            PerformanceEvents.DeserializeResponse,\n            this.logger,\n            this.performanceClient,\n            correlationId\n        )(responseString, responseType, this.logger);\n\n        return invokeAsync(\n            Authorize.handleResponseCode,\n            PerformanceEvents.HandleResponseCode,\n            this.logger,\n            this.performanceClient,\n            correlationId\n        )(\n            request,\n            serverParams,\n            pkceCodes.verifier,\n            this.apiId,\n            this.config,\n            authClient,\n            this.browserStorage,\n            this.nativeStorage,\n            this.eventHandler,\n            this.logger,\n            this.performanceClient,\n            this.platformAuthProvider\n        );\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}