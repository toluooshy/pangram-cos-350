{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{doc,getDoc,setDoc,getDocs,collection}from\"firebase/firestore\";import{db}from\"./utils/firebase\";import{loginRequest}from\"./utils/auth\";import JSONColorOutput from\"./JSONColorOutput\";import{useMsal}from\"@azure/msal-react\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){const{instance}=useMsal();const[text,setText]=useState(\"\");const[response,setResponse]=useState(null);const[loading,setLoading]=useState(false);const[showModal,setShowModal]=useState(false);const[progress,setProgress]=useState(0);const[userEmail,setUserEmail]=useState(null);const[usageCount,setUsageCount]=useState(0);const API_KEY=process.env.REACT_APP_PANGRAM_API_KEY;const API_BASE_URL=process.env.REACT_APP_API_BASE_URL;const FIRESTORE_COLLECTION=process.env.REACT_APP_FIREBASE_FIRESTORE_COLLECTION;const MAX_WORDS=process.env.REACT_APP_MAX_WORDS;const MAX_USAGE=process.env.REACT_APP_MAX_USAGE;const LOGIN_IDS=(process.env.REACT_APP_LOGIN_IDS||\"\").split(\",\");const ALERT_EMAILS=(process.env.REACT_APP_ALERT_EMAILS||\"\").split(\",\");const ALERT_THRESHOLD=Number(process.env.REACT_APP_ALERT_THRESHOLD||1000);const ALERT_STEP=Number(process.env.REACT_APP_ALERT_STEP||100);// MSAL-powered Login\nconst handleLogin=()=>{instance.loginPopup(loginRequest).then(response=>{// Get the whitelist from .env and split into array\nconst whitelist=LOGIN_IDS;const email=response.account.username;const trimmedNetid=email.split(\"@\")[0];if(!whitelist.includes(trimmedNetid)){return alert(\"This NetID is not allowed.\");}localStorage.setItem(\"pangram_email\",email);setUserEmail(email);fetchUsageCount(email);}).catch(error=>{console.error(\"Login error:\",error);});};// Logout\nconst handleLogout=()=>{localStorage.removeItem(\"pangram_email\");setUserEmail(null);setUsageCount(0);window.location.reload();};// Firestore usage count\nconst fetchUsageCount=async email=>{var _docSnap$data;if(!email)return;const docRef=doc(db,FIRESTORE_COLLECTION,email);const docSnap=await getDoc(docRef);setUsageCount(docSnap.exists()?((_docSnap$data=docSnap.data())===null||_docSnap$data===void 0?void 0:_docSnap$data.count)||0:0);};// Cumulative firestore usage count\nconst getTotalUsage=async()=>{const querySnapshot=await getDocs(collection(db,FIRESTORE_COLLECTION));let total=0;querySnapshot.forEach(doc=>{var _doc$data;const count=((_doc$data=doc.data())===null||_doc$data===void 0?void 0:_doc$data.count)||0;total+=count;});return total;};const incrementUsage=async email=>{var _userSnap$data;if(!email)return false;const userRef=doc(db,FIRESTORE_COLLECTION,email);const userSnap=await getDoc(userRef);const currentUserCount=userSnap.exists()?((_userSnap$data=userSnap.data())===null||_userSnap$data===void 0?void 0:_userSnap$data.count)||0:0;if(currentUserCount>=MAX_USAGE){alert(\"You have reached the maximum number of allowed tries.\");return false;}// Increment user count\nawait setDoc(userRef,{count:currentUserCount+1},{merge:true});setUsageCount(currentUserCount+1);// Get total usage across all users\nconst totalUsage=await getTotalUsage();// Send alert if over threshold\nif(totalUsage>=ALERT_THRESHOLD&&(totalUsage-ALERT_THRESHOLD)%ALERT_STEP===0){ALERT_EMAILS.forEach(async email=>{await fetch(\"\".concat(API_BASE_URL,\"/api/send-alert\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({to:[email],subject:\"\\uD83D\\uDCCA Princeton COS 350 Pangram Terminal Usage: \".concat(totalUsage),message:\"\\u26A0\\uFE0F Alert! Total Pangram Terminal AI interface usage across all students for the assignment has reached \".concat(totalUsage,\" uses.\")})});});}return true;};// Send button handler\nconst handleSend=async()=>{if(!userEmail)return;if(usageCount>=MAX_USAGE){alert(\"You have reached the maximum number of allowed tries.\");return;}setLoading(true);setResponse(null);setProgress(0);// Loading bar\nconst interval=setInterval(()=>{setProgress(p=>{if(p>=100){clearInterval(interval);return 100;}return p+Math.random()*8+3;});},120);try{const res=await fetch(\"https://text.api.pangram.com\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"x-api-key\":API_KEY},body:JSON.stringify({text})});const data=await res.json();setResponse(data);await incrementUsage(userEmail);}catch(err){setResponse({error:err.message});}clearInterval(interval);setProgress(100);setTimeout(()=>setLoading(false),400);};// Load stored login on mount\nuseEffect(()=>{const stored=localStorage.getItem(\"pangram_email\");if(stored){setUserEmail(stored);fetchUsageCount(stored);}},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Pangram COS 350 Terminal\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignContent:\"center\"},children:[userEmail&&/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:400},children:[\"[Usage: \",usageCount,\"/\",MAX_USAGE,\"]\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"terminal-btn2\",onClick:handleLogout,children:\"Sign Out\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"info-btn\",onClick:()=>setShowModal(true),children:\"\\u24D8\"})]})]}),showModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h2\",{children:\"About This Tool\"}),/*#__PURE__*/_jsx(\"p\",{children:\"For Assignment A4, students generate text using AI, then attempt to edit it so that Pangram no longer detects it as AI-generated.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Pangram is considered one of the strongest AI detectors. The company asserts that paraphrasing high-likelihood AI text is difficult and may not be easier than writing it yourself.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Because Pangram requires a subscription, the instructor proxies requests and divides the quota among students.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:()=>setShowModal(false),children:\"Close\"})]})}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-modal\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Processing Request...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loading-bar-outline\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-bar-fill\",style:{width:\"\".concat(Math.min(progress,100),\"%\")}})}),/*#__PURE__*/_jsxs(\"p\",{children:[Math.floor(progress),\"%\"]})]})}),!userEmail&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-modal\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Sign In\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You must sign in with your institutional account to use this app.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"terminal-btn\",onClick:handleLogin,children:\"Sign In with Entra ID\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"terminal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"terminal-panel\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"panel-title\",children:\"Input\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"terminal-textarea\",value:text,onChange:e=>{const rawWords=e.target.value.split(/\\s+/);// keep empty strings\nconst words=rawWords.slice(0,MAX_WORDS);// enforce max\nsetText(words.join(\" \"));},onPaste:e=>{e.preventDefault();const paste=(e.clipboardData||window.clipboardData).getData(\"text\");const pasteWords=paste.split(/\\s+/);// keep spaces\nconst currentWords=text.split(/\\s+/);const remaining=MAX_WORDS-currentWords.length;if(remaining<=0)return;const allowedWords=pasteWords.slice(0,remaining);setText([...currentWords,...allowedWords].join(\" \"));},placeholder:\"Enter text...\",disabled:!userEmail}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"right\",fontWeight:\"bold\",color:text.split(/\\s+/).filter(Boolean).length>=MAX_WORDS-1?\"#ff0000\":\"#ffffff\",marginTop:\"4px\"},children:[text.split(/\\s+/).filter(Boolean).length,\" / \",MAX_WORDS-1,\" words\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"terminal-btn\",onClick:handleSend,disabled:!userEmail||loading,children:loading?\"Working...\":\"Send\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"terminal-panel\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"panel-title\",children:\"Output\"}),/*#__PURE__*/_jsx(JSONColorOutput,{data:response})]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","doc","getDoc","setDoc","getDocs","collection","db","loginRequest","JSONColorOutput","useMsal","jsx","_jsx","jsxs","_jsxs","App","instance","text","setText","response","setResponse","loading","setLoading","showModal","setShowModal","progress","setProgress","userEmail","setUserEmail","usageCount","setUsageCount","API_KEY","process","env","REACT_APP_PANGRAM_API_KEY","API_BASE_URL","REACT_APP_API_BASE_URL","FIRESTORE_COLLECTION","REACT_APP_FIREBASE_FIRESTORE_COLLECTION","MAX_WORDS","REACT_APP_MAX_WORDS","MAX_USAGE","REACT_APP_MAX_USAGE","LOGIN_IDS","REACT_APP_LOGIN_IDS","split","ALERT_EMAILS","REACT_APP_ALERT_EMAILS","ALERT_THRESHOLD","Number","REACT_APP_ALERT_THRESHOLD","ALERT_STEP","REACT_APP_ALERT_STEP","handleLogin","loginPopup","then","whitelist","email","account","username","trimmedNetid","includes","alert","localStorage","setItem","fetchUsageCount","catch","error","console","handleLogout","removeItem","window","location","reload","_docSnap$data","docRef","docSnap","exists","data","count","getTotalUsage","querySnapshot","total","forEach","_doc$data","incrementUsage","_userSnap$data","userRef","userSnap","currentUserCount","merge","totalUsage","fetch","concat","method","headers","body","JSON","stringify","to","subject","message","handleSend","interval","setInterval","p","clearInterval","Math","random","res","json","err","setTimeout","stored","getItem","className","children","style","display","alignContent","fontWeight","onClick","e","stopPropagation","width","min","floor","value","onChange","rawWords","target","words","slice","join","onPaste","preventDefault","paste","clipboardData","getData","pasteWords","currentWords","remaining","length","allowedWords","placeholder","disabled","textAlign","color","filter","Boolean","marginTop"],"sources":["/Users/tolu/pangram-cos-350/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { doc, getDoc, setDoc, getDocs, collection } from \"firebase/firestore\";\nimport { db } from \"./utils/firebase\";\nimport { loginRequest } from \"./utils/auth\";\nimport JSONColorOutput from \"./JSONColorOutput\";\nimport { useMsal } from \"@azure/msal-react\";\nimport \"./App.css\";\n\nexport default function App() {\n  const { instance } = useMsal();\n\n  const [text, setText] = useState(\"\");\n  const [response, setResponse] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [userEmail, setUserEmail] = useState(null);\n  const [usageCount, setUsageCount] = useState(0);\n\n  const API_KEY = process.env.REACT_APP_PANGRAM_API_KEY;\n  const API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\n  const FIRESTORE_COLLECTION =\n    process.env.REACT_APP_FIREBASE_FIRESTORE_COLLECTION;\n  const MAX_WORDS = process.env.REACT_APP_MAX_WORDS;\n  const MAX_USAGE = process.env.REACT_APP_MAX_USAGE;\n  const LOGIN_IDS = (process.env.REACT_APP_LOGIN_IDS || \"\").split(\",\");\n  const ALERT_EMAILS = (process.env.REACT_APP_ALERT_EMAILS || \"\").split(\",\");\n  const ALERT_THRESHOLD = Number(process.env.REACT_APP_ALERT_THRESHOLD || 1000);\n  const ALERT_STEP = Number(process.env.REACT_APP_ALERT_STEP || 100);\n\n  // MSAL-powered Login\n  const handleLogin = () => {\n    instance\n      .loginPopup(loginRequest)\n      .then((response) => {\n        // Get the whitelist from .env and split into array\n        const whitelist = LOGIN_IDS;\n        const email = response.account.username;\n        const trimmedNetid = email.split(\"@\")[0];\n\n        if (!whitelist.includes(trimmedNetid)) {\n          return alert(\"This NetID is not allowed.\");\n        }\n        localStorage.setItem(\"pangram_email\", email);\n        setUserEmail(email);\n        fetchUsageCount(email);\n      })\n      .catch((error) => {\n        console.error(\"Login error:\", error);\n      });\n  };\n\n  // Logout\n  const handleLogout = () => {\n    localStorage.removeItem(\"pangram_email\");\n    setUserEmail(null);\n    setUsageCount(0);\n    window.location.reload();\n  };\n\n  // Firestore usage count\n  const fetchUsageCount = async (email) => {\n    if (!email) return;\n    const docRef = doc(db, FIRESTORE_COLLECTION, email);\n    const docSnap = await getDoc(docRef);\n    setUsageCount(docSnap.exists() ? docSnap.data()?.count || 0 : 0);\n  };\n\n  // Cumulative firestore usage count\n  const getTotalUsage = async () => {\n    const querySnapshot = await getDocs(collection(db, FIRESTORE_COLLECTION));\n    let total = 0;\n    querySnapshot.forEach((doc) => {\n      const count = doc.data()?.count || 0;\n      total += count;\n    });\n    return total;\n  };\n\n  const incrementUsage = async (email) => {\n    if (!email) return false;\n\n    const userRef = doc(db, FIRESTORE_COLLECTION, email);\n    const userSnap = await getDoc(userRef);\n    const currentUserCount = userSnap.exists()\n      ? userSnap.data()?.count || 0\n      : 0;\n\n    if (currentUserCount >= MAX_USAGE) {\n      alert(\"You have reached the maximum number of allowed tries.\");\n      return false;\n    }\n\n    // Increment user count\n    await setDoc(userRef, { count: currentUserCount + 1 }, { merge: true });\n    setUsageCount(currentUserCount + 1);\n\n    // Get total usage across all users\n    const totalUsage = await getTotalUsage();\n\n    // Send alert if over threshold\n    if (\n      totalUsage >= ALERT_THRESHOLD &&\n      (totalUsage - ALERT_THRESHOLD) % ALERT_STEP === 0\n    ) {\n      ALERT_EMAILS.forEach(async (email) => {\n        await fetch(`${API_BASE_URL}/api/send-alert`, {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            to: [email],\n            subject: `ðŸ“Š Princeton COS 350 Pangram Terminal Usage: ${totalUsage}`,\n            message: `âš ï¸ Alert! Total Pangram Terminal AI interface usage across all students for the assignment has reached ${totalUsage} uses.`,\n          }),\n        });\n      });\n    }\n\n    return true;\n  };\n\n  // Send button handler\n  const handleSend = async () => {\n    if (!userEmail) return;\n\n    if (usageCount >= MAX_USAGE) {\n      alert(\"You have reached the maximum number of allowed tries.\");\n      return;\n    }\n\n    setLoading(true);\n    setResponse(null);\n    setProgress(0);\n\n    // Loading bar\n    const interval = setInterval(() => {\n      setProgress((p) => {\n        if (p >= 100) {\n          clearInterval(interval);\n          return 100;\n        }\n        return p + Math.random() * 8 + 3;\n      });\n    }, 120);\n\n    try {\n      const res = await fetch(\"https://text.api.pangram.com\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-api-key\": API_KEY,\n        },\n        body: JSON.stringify({ text }),\n      });\n\n      const data = await res.json();\n      setResponse(data);\n\n      await incrementUsage(userEmail);\n    } catch (err) {\n      setResponse({ error: err.message });\n    }\n\n    clearInterval(interval);\n    setProgress(100);\n    setTimeout(() => setLoading(false), 400);\n  };\n\n  // Load stored login on mount\n  useEffect(() => {\n    const stored = localStorage.getItem(\"pangram_email\");\n    if (stored) {\n      setUserEmail(stored);\n      fetchUsageCount(stored);\n    }\n  }, []);\n\n  return (\n    <div className=\"app-container\">\n      <header className=\"header\">\n        <span>Pangram COS 350 Terminal</span>\n        <div style={{ display: \"flex\", alignContent: \"center\" }}>\n          {userEmail && (\n            <div style={{ display: \"flex\" }}>\n              <div style={{ fontWeight: 400 }}>\n                [Usage: {usageCount}/{MAX_USAGE}]\n              </div>\n              <button className=\"terminal-btn2\" onClick={handleLogout}>\n                Sign Out\n              </button>\n            </div>\n          )}\n          <button className=\"info-btn\" onClick={() => setShowModal(true)}>\n            â“˜\n          </button>\n        </div>\n      </header>\n\n      {/* About modal */}\n      {showModal && (\n        <div className=\"modal-overlay\" onClick={() => setShowModal(false)}>\n          <div className=\"modal\" onClick={(e) => e.stopPropagation()}>\n            <h2>About This Tool</h2>\n            <p>\n              For Assignment A4, students generate text using AI, then attempt\n              to edit it so that Pangram no longer detects it as AI-generated.\n            </p>\n            <p>\n              Pangram is considered one of the strongest AI detectors. The\n              company asserts that paraphrasing high-likelihood AI text is\n              difficult and may not be easier than writing it yourself.\n            </p>\n            <p>\n              Because Pangram requires a subscription, the instructor proxies\n              requests and divides the quota among students.\n            </p>\n            <button className=\"modal-close\" onClick={() => setShowModal(false)}>\n              Close\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Loading modal */}\n      {loading && (\n        <div className=\"modal-overlay\">\n          <div className=\"loading-modal\">\n            <h3>Processing Request...</h3>\n            <div className=\"loading-bar-outline\">\n              <div\n                className=\"loading-bar-fill\"\n                style={{ width: `${Math.min(progress, 100)}%` }}\n              />\n            </div>\n            <p>{Math.floor(progress)}%</p>\n          </div>\n        </div>\n      )}\n\n      {/* Login overlay */}\n      {!userEmail && (\n        <div className=\"modal-overlay\">\n          <div className=\"loading-modal\">\n            <h3>Sign In</h3>\n            <p>\n              You must sign in with your institutional account to use this app.\n            </p>\n\n            <button className=\"terminal-btn\" onClick={handleLogin}>\n              Sign In with Entra ID\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Main terminal */}\n      <div className=\"terminal-body\">\n        <div className=\"terminal-panel\">\n          <h2 className=\"panel-title\">Input</h2>\n          <textarea\n            className=\"terminal-textarea\"\n            value={text}\n            onChange={(e) => {\n              const rawWords = e.target.value.split(/\\s+/); // keep empty strings\n              const words = rawWords.slice(0, MAX_WORDS); // enforce max\n              setText(words.join(\" \"));\n            }}\n            onPaste={(e) => {\n              e.preventDefault();\n              const paste = (e.clipboardData || window.clipboardData).getData(\n                \"text\"\n              );\n              const pasteWords = paste.split(/\\s+/); // keep spaces\n              const currentWords = text.split(/\\s+/);\n              const remaining = MAX_WORDS - currentWords.length;\n              if (remaining <= 0) return;\n              const allowedWords = pasteWords.slice(0, remaining);\n              setText([...currentWords, ...allowedWords].join(\" \"));\n            }}\n            placeholder=\"Enter text...\"\n            disabled={!userEmail}\n          />\n\n          {/* Word counter */}\n          <div\n            style={{\n              textAlign: \"right\",\n              fontWeight: \"bold\",\n              color:\n                text.split(/\\s+/).filter(Boolean).length >= MAX_WORDS - 1\n                  ? \"#ff0000\"\n                  : \"#ffffff\",\n              marginTop: \"4px\",\n            }}\n          >\n            {text.split(/\\s+/).filter(Boolean).length} / {MAX_WORDS - 1} words\n          </div>\n          <button\n            className=\"terminal-btn\"\n            onClick={handleSend}\n            disabled={!userEmail || loading}\n          >\n            {loading ? \"Working...\" : \"Send\"}\n          </button>\n        </div>\n\n        <div className=\"terminal-panel\">\n          <h2 className=\"panel-title\">Output</h2>\n          <JSONColorOutput data={response} />\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}